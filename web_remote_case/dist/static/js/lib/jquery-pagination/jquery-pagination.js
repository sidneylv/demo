!function(e){e.PaginationCalculator=function(e,t){this.maxentries=e,this.opts=t},e.extend(e.PaginationCalculator.prototype,{numPages:function(){return Math.ceil(this.maxentries/this.opts.items_per_page)},getInterval:function(e){var t=Math.floor(this.opts.num_display_entries/2),a=this.numPages(),s=a-this.opts.num_display_entries,n=e>t?Math.max(Math.min(e-t,s),0):0,i=e>t?Math.min(e+t+this.opts.num_display_entries%2,a):Math.min(this.opts.num_display_entries,a);return{start:n,end:i}}}),e.PaginationRenderers={},e.PaginationRenderers.defaultRenderer=function(t,a){this.maxentries=t,this.opts=a,this.pc=new e.PaginationCalculator(t,a)},e.extend(e.PaginationRenderers.defaultRenderer.prototype,{createLink:function(t,a,s){var n,i=this.pc.numPages();return t=0>t?0:i>t?t:i-1,s=e.extend({text:t+1,classes:""},s||{}),n=t==a?e("<span class='current'>"+s.text+"</span>"):e("<a>"+s.text+"</a>").attr("href",this.opts.link_to.replace(/__id__/,t)),s.classes&&n.addClass(s.classes),s.rel&&n.attr("rel",s.rel),n.data("page_id",t),n},appendRange:function(e,t,a,s,n){var i;for(i=a;s>i;i++)this.createLink(i,t,n).appendTo(e)},getLinks:function(t,a){var s,n,i,r,p=this.pc.getInterval(t),o=this.pc.numPages(),_=e("<div class='pagination'></div>"),d=e('<div class="pagination-page"></div>'),l="",u="",g=this;return g.opts.className&&_.attr("class",g.opts.className),g.opts.show_info&&(i=t*g.opts.items_per_page+1,r=(t+1)*g.opts.items_per_page,r=r>=g.maxentries?g.maxentries:r,l='<span class="pagination-info">'+i+"-"+r+"条，共"+g.maxentries+"条</span>",_.append(l)),this.opts.first_text&&(t>0||this.opts.next_show_always)&&d.append(this.createLink(0,t,{text:this.opts.first_text,classes:"first",rel:"first"})),this.opts.prev_text&&(t>0||this.opts.prev_show_always)&&d.append(this.createLink(t-1,t,{text:this.opts.prev_text,classes:"prev",rel:"prev"})),p.start>0&&this.opts.num_edge_entries>0&&(n=Math.min(this.opts.num_edge_entries,p.start),this.appendRange(d,t,0,n,{classes:"sp"}),this.opts.num_edge_entries<p.start&&this.opts.ellipse_text&&e("<span>"+this.opts.ellipse_text+"</span>").appendTo(d)),this.appendRange(d,t,p.start,p.end),p.end<o&&this.opts.num_edge_entries>0&&(o-this.opts.num_edge_entries>p.end&&this.opts.ellipse_text&&e("<span>"+this.opts.ellipse_text+"</span>").appendTo(d),s=Math.max(o-this.opts.num_edge_entries,p.end),this.appendRange(d,t,s,o,{classes:"ep"})),this.opts.next_text&&(o-1>t||this.opts.next_show_always)&&d.append(this.createLink(t+1,t,{text:this.opts.next_text,classes:"next",rel:"next"})),this.opts.last_text&&(o-1>t||this.opts.next_show_always)&&d.append(this.createLink(o,t,{text:this.opts.last_text,classes:"last",rel:"last"})),_.append(d),this.opts.show_jump&&(u='<div class="pagination-jump"><input class="page-num" type="text" placeholder="如：12" /><a class="jump">'+this.opts.jump_text+"</a></div>",_.append(u)),_.find("input").keyup(function(){var t,a=e(this),s=a.val();return+s>0?(t=0===g.opts.current_page?s-1:s,void a.next(".jump").data("page_id",t)):a.val("")}),e("a",d).click(a),e(_).find(".jump").click(function(t){var s;s=e(this).data("page_id"),s>=0&&a(t)}),_}}),e.fn.pagination=function(t,a){function s(t){var a=e(t.target).data("page_id"),s=n(a);return s||t.stopPropagation(),s}function n(e){o.data("current_page",e),r=i.getLinks(e,s),o.empty(),r.appendTo(o);var t=a.callback(e,o);return t}a=e.extend({items_per_page:10,num_display_entries:11,current_page:0,num_edge_entries:0,link_to:"#",prev_text:"Prev",next_text:"Next",ellipse_text:"...",prev_show_always:!0,next_show_always:!0,renderer:"defaultRenderer",show_if_single_page:!1,load_first_page:!0,show_jump:!1,jump_text:"跳转",callback:function(){return!1}},a||{});var i,r,p,o=this;if(p=parseInt(a.current_page,10),o.data("current_page",p),t=!t||0>t?1:t,a.items_per_page=!a.items_per_page||a.items_per_page<0?1:a.items_per_page,!e.PaginationRenderers[a.renderer])throw new ReferenceError("Pagination renderer '"+a.renderer+"' was not found in jQuery.PaginationRenderers object.");i=new e.PaginationRenderers[a.renderer](t,a);var _=new e.PaginationCalculator(t,a),d=_.numPages();o.off("setPage").on("setPage",{numPages:d},function(e,t){return t>=0&&t<e.data.numPages?(n(t),!1):void 0}),o.off("prevPage").on("prevPage",function(){var t=e(this).data("current_page");return t>0&&n(t-1),!1}),o.off("nextPage").on("nextPage",{numPages:d},function(t){var a=e(this).data("current_page");return a<t.data.numPages-1&&n(a+1),!1}),o.off("currentPage").on("currentPage",function(){var t=e(this).data("current_page");return n(t),!1}),r=i.getLinks(p,s),o.empty(),(d>1||a.show_if_single_page)&&r.appendTo(o),a.load_first_page&&a.callback(p,o)}}(jQuery);