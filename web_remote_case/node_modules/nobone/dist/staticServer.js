// Generated by CoffeeScript 1.8.0
var host, kit, nobone, openDir, port, renderer, rootDir, service, _ref, _ref1;

process.env.NODE_ENV = 'development';

nobone = require('./nobone');

_ref = nobone({
  service: {},
  renderer: {
    enableWatcher: true
  }
}), kit = _ref.kit, renderer = _ref.renderer, service = _ref.service;

_ref1 = process.argv.slice(2), host = _ref1[0], port = _ref1[1], rootDir = _ref1[2], openDir = _ref1[3];

service.use(renderer.staticEx(rootDir));

kit.log("Static folder: " + rootDir.cyan);

service.get('/favicon.ico', function(req, res) {
  var noboneFavicon;
  noboneFavicon = kit.path.join(__dirname, '/../assets/img/nobone.png');
  return res.sendFile(noboneFavicon);
});

service.listen(port, host, function() {
  kit.log("Listen: " + ("" + host + ":" + port).cyan);
  if (JSON.parse(openDir)) {
    return kit.open('http://127.0.0.1:' + port)["catch"](function() {});
  }
});
